<!DOCTYPE html>
<html>

  <head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>

  <title>Remote</title>
  <meta name='description' content='Build cross platform desktop apps with web technologies'>

  <link rel='shortcut icon' href='/images/favicon.ico'/>
  <link rel='stylesheet' href='/css/normalize.css'>
  <link rel='stylesheet' href='/css/skeleton.css'>
  <link rel='stylesheet' href='/css/main.css'>
  <link rel='stylesheet' href='/css/octicons/octicons.css'>
  <link rel='stylesheet' href='/css/pygments.css'>
  <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:400,700' rel='stylesheet' type='text/css'>
  <link rel='canonical' href='/docs/v0.26.0/api/remote/'>
  <link rel='alternate' type='application/rss+xml' title='Ligra' href='/feed.xml' />
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-3769691-57', 'auto');
    ga('send', 'pageview');
  </script>
</head>


  <body>

    <header>
  <div class='top-bar'>
    <div class='container'>
      <div class='row'>
        <div class='four columns'>
          <ul class='navigation inline-list'>
            <li><a href='/#built-on-electron'>Built on Electron</a></li>
            <li><a href='/#get-started'>Get Started</a></li>
          </ul>
        </div>
        <div class='eight columns text-right'>
          <ul class='navigation inline-list'>
            <li><a href='https://github.com/atom/electron'>Repository</a></li>
            <li><a href='/docs/v0.36.5'>Documentation</a></li>
            <li><a href='http://blog.atom.io'>Blog</a></li>
            <li><a href='https://discuss.atom.io/c/electron'>Discuss</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class='page-content'>
      <div class='wrapper'>
        <div class='page-template remote'>
  <section class='jump-to-release is-compact'>
  <div class='container'>
    <div class='row'>
      <div class='twelve columns'>
      <h1><img class="electron-icon" src='/images/electron-icon.svg'>Electron Documentation</h1>
      
      <a href='/docs/v0.26.0/'>v0.26.0  </a> |
      <a href='https://github.com/atom/electron/blob/master/docs/api/remote.md'>Document Source</a>
      
      </div>
    </div>
  </div>
</section>

<section class='docs'>
  <div class='container'>
    <div class='row'>
      <div class='ten columns release offset-by-one'>
        
        <h6 class='docs-breadcrumb'>v0.26.0 / API
           / Remote </h6>
        

        <h1 id="remote">remote</h1>

<p>The <code>remote</code> module provides a simple way to do inter-process communication
between the renderer process and the main process.</p>

<p>In Electron, only GUI-related modules are available in the renderer process.
Without the <code>remote</code> module, users who wanted to call a main process API in
the renderer process would have to explicitly send inter-process messages
to the main process. With the <code>remote</code> module, users can invoke methods of
main process object without explicitly sending inter-process messages,
similar to Java&#39;s
<a href="http://en.wikipedia.org/wiki/Java_remote_method_invocation">RMI</a>.</p>

<p>An example of creating a browser window in renderer process:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">remote</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;remote&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">BrowserWindow</span> <span class="o">=</span> <span class="nx">remote</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;browser-window&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">win</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BrowserWindow</span><span class="p">({</span> <span class="nx">width</span><span class="o">:</span> <span class="mi">800</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span> <span class="mi">600</span> <span class="p">});</span>
<span class="nx">win</span><span class="p">.</span><span class="nx">loadUrl</span><span class="p">(</span><span class="s1">&#39;https://github.com&#39;</span><span class="p">);</span>
</code></pre></div>
<h2 id="remote-objects">Remote objects</h2>

<p>Each object (including functions) returned by the <code>remote</code> module represents an
object in the main process (we call it a remote object or remote function).
When you invoke methods of a remote object, call a remote function, or create
a new object with the remote constructor (function), you are actually sending
synchronous inter-process messages.</p>

<p>In the example above, both <code>BrowserWindow</code> and <code>win</code> were remote objects and
<code>new BrowserWindow</code> didn&#39;t create a <code>BrowserWindow</code> object in the renderer process.
Instead, it created a <code>BrowserWindow</code> object in the main process and returned the
corresponding remote object in the renderer process, namely the <code>win</code> object.</p>

<h2 id="lifetime-of-remote-objects">Lifetime of remote objects</h2>

<p>Electron makes sure that as long as the remote object in the renderer process
lives (in other words, has not been garbage collected), the corresponding object
in the main process would never be released. When the remote object has been
garbage collected, the corresponding object in the main process would be
dereferenced.</p>

<p>If the remote object is leaked in renderer process (e.g. stored in a map but never
freed), the corresponding object in the main process would also be leaked,
so you should be very careful not to leak remote objects.</p>

<p>Primary value types like strings and numbers, however, are sent by copy.</p>

<h2 id="passing-callbacks-to-the-main-process">Passing callbacks to the main process</h2>

<p>Some APIs in the main process accept callbacks, and it would be tempting to
pass callbacks when calling a remote function. The <code>remote</code> module does support
doing this, but you should also be extremely careful with this.</p>

<p>First, in order to avoid deadlocks, the callbacks passed to the main process
are called asynchronously, so you should not expect the main process to
get the return value of the passed callbacks.</p>

<p>Second, the callbacks passed to the main process will not get released
automatically after they are called. Instead, they will persistent until the
main process garbage-collects them.</p>

<p>For example, the following code seems innocent at first glance. It installs a
callback for the <code>close</code> event on a remote object:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">remote</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;remote&#39;</span><span class="p">);</span>
<span class="nx">remote</span><span class="p">.</span><span class="nx">getCurrentWindow</span><span class="p">().</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// blabla...</span>
<span class="p">});</span>
</code></pre></div>
<p>The problem is that the callback would be stored in the main process until you
explicitly uninstall it! So each time you reload your window, the callback would
be installed again and previous callbacks would just leak. To make things
worse, since the context of previously installed callbacks have been released,
when the <code>close</code> event was emitted, exceptions would be raised in the main process.</p>

<p>Generally, unless you are clear what you are doing, you should always avoid
passing callbacks to the main process.</p>

<h2 id="remote-buffer">Remote buffer</h2>

<p>An instance of node&#39;s <code>Buffer</code> is an object, so when you get a <code>Buffer</code> from
the main process, what you get is indeed a remote object (let&#39;s call it remote
buffer), and everything would just follow the rules of remote objects.</p>

<p>However you should remember that although a remote buffer behaves like the real
<code>Buffer</code>, it&#39;s not a <code>Buffer</code> at all. If you pass a remote buffer to node APIs
that accept a <code>Buffer</code>, you should assume the remote buffer would be treated
like a normal object, instead of a <code>Buffer</code>.</p>

<p>For example, you can call <code>BrowserWindow.capturePage</code> in the renderer process, which
returns a <code>Buffer</code> by calling the passed callback:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">remote</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;remote&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>
<span class="nx">remote</span><span class="p">.</span><span class="nx">getCurrentWindow</span><span class="p">().</span><span class="nx">capturePage</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">buf</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFile</span><span class="p">(</span><span class="s1">&#39;/tmp/screenshot.png&#39;</span><span class="p">,</span> <span class="nx">buf</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>But you may be surprised to find that the file written was corrupted. This is
because when you called <code>fs.writeFile</code>, thinking that <code>buf</code> was a <code>Buffer</code> when
in fact it was a remote buffer, and it was converted to string before it was
written to the file. Since <code>buf</code> contained binary data and could not be represented
by a UTF-8 encoded string, the written file was corrupted.</p>

<p>The work-around is to write the <code>buf</code> in the main process, where it is a real
<code>Buffer</code>:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">remote</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;remote&#39;</span><span class="p">);</span>
<span class="nx">remote</span><span class="p">.</span><span class="nx">getCurrentWindow</span><span class="p">().</span><span class="nx">capturePage</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">buf</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">remote</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">).</span><span class="nx">writeFile</span><span class="p">(</span><span class="s1">&#39;/tmp/screenshot.png&#39;</span><span class="p">,</span> <span class="nx">buf</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p>The same thing could happen for all native types, but usually it would just
throw a type error. The <code>Buffer</code> deserves your special attention because it
might be converted to string, and APIs accepting <code>Buffer</code> usually accept string
too, and data corruption could happen when it contains binary data.</p>

<h2 id="remote.require(module)">remote.require(module)</h2>

<ul>
<li><code>module</code> String</li>
</ul>

<p>Returns the object returned by <code>require(module)</code> in the main process.</p>

<h2 id="remote.getcurrentwindow()">remote.getCurrentWindow()</h2>

<p>Returns the <a href="http://electron.atom.io/docs/v0.26.0/api/browser-window">BrowserWindow</a> object which this web page
belongs to.</p>

<h2 id="remote.getcurrentwebcontent()">remote.getCurrentWebContent()</h2>

<p>Returns the WebContents object of this web page.</p>

<h2 id="remote.getglobal(name)">remote.getGlobal(name)</h2>

<ul>
<li><code>name</code> String</li>
</ul>

<p>Returns the global variable of <code>name</code> (e.g. <code>global[name]</code>) in the main
process.</p>

<h2 id="remote.process">remote.process</h2>

<p>Returns the <code>process</code> object in the main process. This is the same as
<code>remote.getGlobal(&#39;process&#39;)</code>, but gets cached.</p>


      </div>
    </div>
    
    <div class='row'>
      <div class='ten columns release offset-by-one docs-footer'>
        <span class="octicon octicon-pencil"></span>
        See something that needs fixing? Propose a change on the <a href='https://github.com/atom/electron/blob/master/docs/api/remote.md'>source</a>.
        <br>
        <span class="octicon octicon-zap"></span>
        Need a different version of the docs? See the <a href='/docs'>available versions</a>.
      </div>
    </div>
    
  </div>
</section>

</div>

      </div>
    </div>

    <footer>
  <div class='container'>
    <div class='row'>
      <div class='one-half column'>
        <ul class='inline-list'>
          <li><a href='https://github.com/atom/electron'>Repository</a></li>
          <li><a href='/docs/v0.36.5'>Documentation</a></li>
          <li><a href='/releases.html'>Releases</a></li>
          <li><a href='http://blog.atom.io'>Blog</a></li>
          <li><a href='https://discuss.atom.io/c/electron'>Discuss</a></li>
        </ul>
      </div>

      <div class='one-half column text-right'>
        <a href='https://github.com' class="no-hover-dec"><span class='octicon octicon-code'></span> with <span class='octicon octicon-heart'></span> by <span class='octicon octicon-logo-github'></span></a>
      </div>
  </div>
</footer>

    <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class='octicon octicon-link'></span>";
    anchor.title = "Permalink";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementsByClassName("docs")[0] || document.getElementsByClassName("news")[0];
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>

  </body>

</html>
