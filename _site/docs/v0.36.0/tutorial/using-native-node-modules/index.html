<!DOCTYPE html>
<html>

  <head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>

  <title>Using Native Node Modules</title>
  <meta name='description' content='Build cross platform desktop apps with web technologies'>

  <link rel='shortcut icon' href='/images/favicon.ico'/>
  <link rel='stylesheet' href='/css/normalize.css'>
  <link rel='stylesheet' href='/css/skeleton.css'>
  <link rel='stylesheet' href='/css/main.css'>
  <link rel='stylesheet' href='/css/octicons/octicons.css'>
  <link rel='stylesheet' href='/css/pygments.css'>
  <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:400,700' rel='stylesheet' type='text/css'>
  <link rel='canonical' href='/docs/v0.36.0/tutorial/using-native-node-modules/'>
  <link rel='alternate' type='application/rss+xml' title='Electron' href='/feed.xml' />
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-3769691-57', 'auto');
    ga('send', 'pageview');
  </script>
</head>


  <body>

    <header>
  <div class='top-bar'>
    <div class='container'>
      <div class='row'>
        <div class='four columns'>
          <ul class='navigation inline-list'>
            <li><a href='/#built-on-electron'>Built on Electron</a></li>
            <li><a href='/#get-started'>Get Started</a></li>
          </ul>
        </div>
        <div class='eight columns text-right'>
          <ul class='navigation inline-list'>
            <li><a href='https://github.com/atom/electron'>Repository</a></li>
            <li><a href='/docs/v0.36.5'>Documentation</a></li>
            <li><a href='http://blog.atom.io'>Blog</a></li>
            <li><a href='https://discuss.atom.io/c/electron'>Discuss</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class='page-content'>
      <div class='wrapper'>
        <div class='page-template using-native-node-modules'>
  <section class='jump-to-release is-compact'>
  <div class='container'>
    <div class='row'>
      <div class='twelve columns'>
      <h1><img class="electron-icon" src='/images/electron-icon.svg'>Electron Documentation</h1>
      
      <a href='/docs/v0.36.0/'>v0.36.0  </a> |
      <a href='https://github.com/atom/electron/blob/master/docs/tutorial/using-native-node-modules.md'>Document Source</a>
      
      </div>
    </div>
  </div>
</section>

<section class='docs'>
  <div class='container'>
    <div class='row'>
      <div class='ten columns release offset-by-one'>
        
        <h6 class='docs-breadcrumb'>v0.36.0 / Tutorial
           / Using Native Node Modules </h6>
        

        <h1 id="using-native-node-modules">Using Native Node Modules</h1>

<p>The native Node modules are supported by Electron, but since Electron is
using a different V8 version from official Node, you have to manually specify
the location of Electron&#39;s headers when building native modules.</p>

<h2 id="native-node-module-compatibility">Native Node Module Compatibility</h2>

<p>Native modules might break when Node starts using a new version of V8.
To make sure the module you&#39;re interested in will work with Electron, you should
check if it supports the internal Node version used by Electron.
You can check what version of Node is used in Electron by looking it up in
the <a href="https://github.com/atom/electron/releases">releases</a> page or by using
<code>process.version</code> (see <a href="https://github.com/atom/electron/blob/master/docs/tutorial/quick-start.md">Quick Start</a>
for example).</p>

<p>Consider using <a href="https://github.com/nodejs/nan/">NAN</a> for your own modules, since
it makes it easier to support multiple versions of Node. It&#39;s also helpful for
porting old modules to newer versions of Node so they can work with Electron.</p>

<h2 id="how-to-install-native-modules">How to Install Native Modules</h2>

<p>Three ways to install native modules:</p>

<h3 id="the-easy-way">The Easy Way</h3>

<p>The most straightforward way to rebuild native modules is via the
<a href="https://github.com/paulcbetts/electron-rebuild"><code>electron-rebuild</code></a> package,
which handles the manual steps of downloading headers and building native modules:</p>
<div class="highlight"><pre><code class="language-sh" data-lang="sh">npm install --save-dev electron-rebuild

<span class="c"># Every time you run &quot;npm install&quot;, run this</span>
./node_modules/.bin/electron-rebuild

<span class="c"># On Windows if you have trouble, try:</span>
.<span class="se">\n</span>ode_modules<span class="se">\.</span>bin<span class="se">\e</span>lectron-rebuild.cmd
</code></pre></div>
<h3 id="the-npm-way">The npm Way</h3>

<p>You can also use <code>npm</code> to install modules. The steps are exactly the same with
Node modules, except that you need to setup some environment variables:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">export </span><span class="nv">npm_config_disturl</span><span class="o">=</span>https://atom.io/download/atom-shell
<span class="nb">export </span><span class="nv">npm_config_target</span><span class="o">=</span>0.33.1
<span class="nb">export </span><span class="nv">npm_config_arch</span><span class="o">=</span>x64
<span class="nb">export </span><span class="nv">npm_config_runtime</span><span class="o">=</span>electron
<span class="nv">HOME</span><span class="o">=</span>~/.electron-gyp npm install module-name
</code></pre></div>
<h3 id="the-node-gyp-way">The node-gyp Way</h3>

<p>To build Node modules with headers of Electron, you need to tell <code>node-gyp</code>
where to download headers and which version to use:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">cd</span> /path-to-module/
<span class="nv">$ HOME</span><span class="o">=</span>~/.electron-gyp node-gyp rebuild --target<span class="o">=</span>0.29.1 --arch<span class="o">=</span>x64 --dist-url<span class="o">=</span>https://atom.io/download/atom-shell
</code></pre></div>
<p>The <code>HOME=~/.electron-gyp</code> changes where to find development headers. The
<code>--target=0.29.1</code> is version of Electron. The <code>--dist-url=...</code> specifies
where to download the headers. The <code>--arch=x64</code> says the module is built for
64bit system.</p>


      </div>
    </div>
    
    <div class='row'>
      <div class='ten columns release offset-by-one docs-footer'>
        <span class="octicon octicon-pencil"></span>
        See something that needs fixing? Propose a change on the <a href='https://github.com/atom/electron/blob/master/docs/tutorial/using-native-node-modules.md'>source</a>.
        <br>
        <span class="octicon octicon-zap"></span>
        Need a different version of the docs? See the <a href='/docs'>available versions</a>.
      </div>
    </div>
    
  </div>
</section>

</div>

      </div>
    </div>

    <footer>
  <div class='container'>
    <div class='row'>
      <div class='one-half column'>
        <ul class='inline-list'>
          <li><a href='https://github.com/atom/electron'>Repository</a></li>
          <li><a href='/docs/v0.36.5'>Documentation</a></li>
          <li><a href='/releases.html'>Releases</a></li>
          <li><a href='http://blog.atom.io'>Blog</a></li>
          <li><a href='https://discuss.atom.io/c/electron'>Discuss</a></li>
        </ul>
      </div>

      <div class='one-half column text-right'>
        <a href='https://github.com' class="no-hover-dec"><span class='octicon octicon-code'></span> with <span class='octicon octicon-heart'></span> by <span class='octicon octicon-logo-github'></span></a>
      </div>
  </div>
</footer>

    <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class='octicon octicon-link'></span>";
    anchor.title = "Permalink";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementsByClassName("docs")[0] || document.getElementsByClassName("news")[0];
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>

  </body>

</html>
