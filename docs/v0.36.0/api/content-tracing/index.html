<!DOCTYPE html>
<html>

  <head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>

  <title>Content Tracing</title>
  <meta name='description' content='Build cross platform desktop apps with web technologies'>

  <link rel='shortcut icon' href='/images/favicon.ico'/>
  <link rel='stylesheet' href='/css/normalize.css'>
  <link rel='stylesheet' href='/css/skeleton.css'>
  <link rel='stylesheet' href='/css/main.css'>
  <link rel='stylesheet' href='/css/octicons/octicons.css'>
  <link rel='stylesheet' href='/css/pygments.css'>
  <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:400,700' rel='stylesheet' type='text/css'>
  <link rel='canonical' href='/docs/v0.36.0/api/content-tracing/'>
  <link rel='alternate' type='application/rss+xml' title='Electron' href='/feed.xml' />
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-3769691-57', 'auto');
    ga('send', 'pageview');
  </script>
</head>


  <body>

    <header>
  <div class='top-bar'>
    <div class='container'>
      <div class='row'>
        <div class='four columns'>
          <ul class='navigation inline-list'>
            <li><a href='/#built-on-electron'>Built on Electron</a></li>
            <li><a href='/#get-started'>Get Started</a></li>
          </ul>
        </div>
        <div class='eight columns text-right'>
          <ul class='navigation inline-list'>
            <li><a href='https://github.com/atom/electron'>Repository</a></li>
            <li><a href='/docs/v0.36.5'>Documentation</a></li>
            <li><a href='http://blog.atom.io'>Blog</a></li>
            <li><a href='https://discuss.atom.io/c/electron'>Discuss</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class='page-content'>
      <div class='wrapper'>
        <div class='page-template content-tracing'>
  <section class='jump-to-release is-compact'>
  <div class='container'>
    <div class='row'>
      <div class='twelve columns'>
      <h1><img class="electron-icon" src='/images/electron-icon.svg'>Electron Documentation</h1>
      
      <a href='/docs/v0.36.0/'>v0.36.0  </a> |
      <a href='https://github.com/atom/electron/blob/master/docs/api/content-tracing.md'>Document Source</a>
      
      </div>
    </div>
  </div>
</section>

<section class='docs'>
  <div class='container'>
    <div class='row'>
      <div class='ten columns release offset-by-one'>
        
        <h6 class='docs-breadcrumb'>v0.36.0 / API
           / Content Tracing </h6>
        

        <h1 id="contenttracing">contentTracing</h1>

<p>The <code>content-tracing</code> module is used to collect tracing data generated by the
underlying Chromium content module. This module does not include a web interface
so you need to open <code>chrome://tracing/</code> in a Chrome browser and load the
generated file to view the result.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">contentTracing</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;electron&#39;</span><span class="p">).</span><span class="nx">contentTracing</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">categoryFilter</span><span class="o">:</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span>
  <span class="nx">traceOptions</span><span class="o">:</span> <span class="s1">&#39;record-until-full,enable-sampling&#39;</span>
<span class="p">}</span>

<span class="nx">contentTracing</span><span class="p">.</span><span class="nx">startRecording</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Tracing started&#39;</span><span class="p">);</span>

  <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">contentTracing</span><span class="p">.</span><span class="nx">stopRecording</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Tracing data recorded to &#39;</span> <span class="o">+</span> <span class="nx">path</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span> <span class="mi">5000</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<h2 id="methods">Methods</h2>

<p>The <code>content-tracing</code> module has the following methods:</p>

<h3 id="contenttracing.getcategories(callback)"><code>contentTracing.getCategories(callback)</code></h3>

<ul>
<li><code>callback</code> Function</li>
</ul>

<p>Get a set of category groups. The category groups can change as new code paths
are reached.</p>

<p>Once all child processes have acknowledged the <code>getCategories</code> request the
<code>callback</code> is invoked with an array of category groups.</p>

<h3 id="contenttracing.startrecording(options,-callback)"><code>contentTracing.startRecording(options, callback)</code></h3>

<ul>
<li><code>options</code> Object

<ul>
<li><code>categoryFilter</code> String</li>
<li><code>traceOptions</code> String</li>
</ul></li>
<li><code>callback</code> Function</li>
</ul>

<p>Start recording on all processes.</p>

<p>Recording begins immediately locally and asynchronously on child processes
as soon as they receive the EnableRecording request. The <code>callback</code> will be
called once all child processes have acknowledged the <code>startRecording</code> request.</p>

<p><code>categoryFilter</code> is a filter to control what category groups should be
traced. A filter can have an optional <code>-</code> prefix to exclude category groups
that contain a matching category. Having both included and excluded
category patterns in the same list is not supported.</p>

<p>Examples:</p>

<ul>
<li><code>test_MyTest*</code>,</li>
<li><code>test_MyTest*,test_OtherStuff</code>,</li>
<li><code>&quot;-excluded_category1,-excluded_category2</code></li>
</ul>

<p><code>traceOptions</code> controls what kind of tracing is enabled, it is a comma-delimited
list. Possible options are:</p>

<ul>
<li><code>record-until-full</code></li>
<li><code>record-continuously</code></li>
<li><code>trace-to-console</code></li>
<li><code>enable-sampling</code></li>
<li><code>enable-systrace</code></li>
</ul>

<p>The first 3 options are trace recoding modes and hence mutually exclusive.
If more than one trace recording modes appear in the <code>traceOptions</code> string,
the last one takes precedence. If none of the trace recording modes are
specified, recording mode is <code>record-until-full</code>.</p>

<p>The trace option will first be reset to the default option (<code>record_mode</code> set to
<code>record-until-full</code>, <code>enable_sampling</code> and <code>enable_systrace</code> set to <code>false</code>)
before options parsed from <code>traceOptions</code> are applied on it.</p>

<h3 id="contenttracing.stoprecording(resultfilepath,-callback)"><code>contentTracing.stopRecording(resultFilePath, callback)</code></h3>

<ul>
<li><code>resultFilePath</code> String</li>
<li><code>callback</code> Function</li>
</ul>

<p>Stop recording on all processes.</p>

<p>Child processes typically cache trace data and only rarely flush and send
trace data back to the main process. This helps to minimize the runtime overhead
of tracing since sending trace data over IPC can be an expensive operation. So,
to end tracing, we must asynchronously ask all child processes to flush any
pending trace data.</p>

<p>Once all child processes have acknowledged the <code>stopRecording</code> request,
<code>callback</code> will be called with a file that contains the traced data.</p>

<p>Trace data will be written into <code>resultFilePath</code> if it is not empty or into a
temporary file. The actual file path will be passed to <code>callback</code> if it&#39;s not
<code>null</code>.</p>

<h3 id="contenttracing.startmonitoring(options,-callback)"><code>contentTracing.startMonitoring(options, callback)</code></h3>

<ul>
<li><code>options</code> Object

<ul>
<li><code>categoryFilter</code> String</li>
<li><code>traceOptions</code> String</li>
</ul></li>
<li><code>callback</code> Function</li>
</ul>

<p>Start monitoring on all processes.</p>

<p>Monitoring begins immediately locally and asynchronously on child processes as
soon as they receive the <code>startMonitoring</code> request.</p>

<p>Once all child processes have acknowledged the <code>startMonitoring</code> request the
<code>callback</code> will be called.</p>

<h3 id="contenttracing.stopmonitoring(callback)"><code>contentTracing.stopMonitoring(callback)</code></h3>

<ul>
<li><code>callback</code> Function</li>
</ul>

<p>Stop monitoring on all processes.</p>

<p>Once all child processes have acknowledged the <code>stopMonitoring</code> request the
<code>callback</code> is called.</p>

<h3 id="contenttracing.capturemonitoringsnapshot(resultfilepath,-callback)"><code>contentTracing.captureMonitoringSnapshot(resultFilePath, callback)</code></h3>

<ul>
<li><code>resultFilePath</code> String</li>
<li><code>callback</code> Function</li>
</ul>

<p>Get the current monitoring traced data.</p>

<p>Child processes typically cache trace data and only rarely flush and send
trace data back to the main process. This is because it may be an expensive
operation to send the trace data over IPC and we would like to avoid unneeded
runtime overhead from tracing. So, to end tracing, we must asynchronously ask
all child processes to flush any pending trace data.</p>

<p>Once all child processes have acknowledged the <code>captureMonitoringSnapshot</code>
request the <code>callback</code> will be called with a file that contains the traced data.</p>

<h3 id="contenttracing.gettracebufferusage(callback)"><code>contentTracing.getTraceBufferUsage(callback)</code></h3>

<ul>
<li><code>callback</code> Function</li>
</ul>

<p>Get the maximum usage across processes of trace buffer as a percentage of the
full state. When the TraceBufferUsage value is determined the <code>callback</code> is
called.</p>

<h3 id="contenttracing.setwatchevent(categoryname,-eventname,-callback)"><code>contentTracing.setWatchEvent(categoryName, eventName, callback)</code></h3>

<ul>
<li><code>categoryName</code> String</li>
<li><code>eventName</code> String</li>
<li><code>callback</code> Function</li>
</ul>

<p><code>callback</code> will will be called every time the given event occurs on any
process.</p>

<h3 id="contenttracing.cancelwatchevent()"><code>contentTracing.cancelWatchEvent()</code></h3>

<p>Cancel the watch event. This may lead to a race condition with the watch event
callback if tracing is enabled.</p>


      </div>
    </div>
    
    <div class='row'>
      <div class='ten columns release offset-by-one docs-footer'>
        <span class="octicon octicon-pencil"></span>
        See something that needs fixing? Propose a change on the <a href='https://github.com/atom/electron/blob/master/docs/api/content-tracing.md'>source</a>.
        <br>
        <span class="octicon octicon-zap"></span>
        Need a different version of the docs? See the <a href='/docs'>available versions</a>.
      </div>
    </div>
    
  </div>
</section>

</div>

      </div>
    </div>

    <footer>
  <div class='container'>
    <div class='row'>
      <div class='one-half column'>
        <ul class='inline-list'>
          <li><a href='https://github.com/atom/electron'>Repository</a></li>
          <li><a href='/docs/v0.36.5'>Documentation</a></li>
          <li><a href='/releases.html'>Releases</a></li>
          <li><a href='http://blog.atom.io'>Blog</a></li>
          <li><a href='https://discuss.atom.io/c/electron'>Discuss</a></li>
        </ul>
      </div>

      <div class='one-half column text-right'>
        <a href='https://github.com' class="no-hover-dec"><span class='octicon octicon-code'></span> with <span class='octicon octicon-heart'></span> by <span class='octicon octicon-logo-github'></span></a>
      </div>
  </div>
</footer>

    <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class='octicon octicon-link'></span>";
    anchor.title = "Permalink";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementsByClassName("docs")[0] || document.getElementsByClassName("news")[0];
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>

  </body>

</html>
