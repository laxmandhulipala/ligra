<!DOCTYPE html>
<html>

  <head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>

  <title>Auto Updater</title>
  <meta name='description' content='Build cross platform desktop apps with web technologies'>

  <link rel='shortcut icon' href='/images/favicon.ico'/>
  <link rel='stylesheet' href='/css/normalize.css'>
  <link rel='stylesheet' href='/css/skeleton.css'>
  <link rel='stylesheet' href='/css/main.css'>
  <link rel='stylesheet' href='/css/octicons/octicons.css'>
  <link rel='stylesheet' href='/css/pygments.css'>
  <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:400,700' rel='stylesheet' type='text/css'>
  <link rel='canonical' href='/docs/v0.29.0/api/auto-updater/'>
  <link rel='alternate' type='application/rss+xml' title='Electron' href='/feed.xml' />
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-3769691-57', 'auto');
    ga('send', 'pageview');
  </script>
</head>


  <body>

    <header>
  <div class='top-bar'>
    <div class='container'>
      <div class='row'>
        <div class='four columns'>
          <ul class='navigation inline-list'>
            <li><a href='/#built-on-electron'>Built on Electron</a></li>
            <li><a href='/#get-started'>Get Started</a></li>
          </ul>
        </div>
        <div class='eight columns text-right'>
          <ul class='navigation inline-list'>
            <li><a href='https://github.com/atom/electron'>Repository</a></li>
            <li><a href='/docs/v0.36.5'>Documentation</a></li>
            <li><a href='http://blog.atom.io'>Blog</a></li>
            <li><a href='https://discuss.atom.io/c/electron'>Discuss</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


    <div class='page-content'>
      <div class='wrapper'>
        <div class='page-template auto-updater'>
  <section class='jump-to-release is-compact'>
  <div class='container'>
    <div class='row'>
      <div class='twelve columns'>
      <h1><img class="electron-icon" src='/images/electron-icon.svg'>Electron Documentation</h1>
      
      <a href='/docs/v0.29.0/'>v0.29.0  </a> |
      <a href='https://github.com/atom/electron/blob/master/docs/api/auto-updater.md'>Document Source</a>
      
      </div>
    </div>
  </div>
</section>

<section class='docs'>
  <div class='container'>
    <div class='row'>
      <div class='ten columns release offset-by-one'>
        
        <h6 class='docs-breadcrumb'>v0.29.0 / API
           / Auto Updater </h6>
        

        <h1 id="auto-updater">auto-updater</h1>

<p><strong>This module has only been implemented for OS X.</strong></p>

<p>Check out <a href="https://github.com/atom/grunt-electron-installer">atom/grunt-electron-installer</a>
for building a Windows installer for your app.</p>

<p>The <code>auto-updater</code> module is a simple wrap around the
<a href="https://github.com/Squirrel/Squirrel.Mac">Squirrel.Mac</a> framework.</p>

<p>Squirrel.Mac requires that your <code>.app</code> folder is signed using the
<a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/codesign.1.html">codesign</a>
utility for updates to be installed.</p>

<h2 id="squirrel">Squirrel</h2>

<p>Squirrel is an OS X framework focused on making application updates <strong>as safe
and transparent as updates to a website</strong>.</p>

<p>Instead of publishing a feed of versions from which your app must select,
Squirrel updates to the version your server tells it to. This allows you to
intelligently update your clients based on the request you give to Squirrel.</p>

<p>Your request can include authentication details, custom headers or a request
body so that your server has the context it needs in order to supply the most
suitable update.</p>

<p>The update JSON Squirrel requests should be dynamically generated based on
criteria in the request, and whether an update is required. Squirrel relies
on server side support for determining whether an update is required, see
<a href="#server-support">Server Support</a>.</p>

<p>Squirrel&#39;s installer is also designed to be fault tolerant, and ensure that any
updates installed are valid.</p>

<h2 id="update-requests">Update Requests</h2>

<p>Squirrel is indifferent to the request the client application provides for
update checking. <code>Accept: application/json</code> is added to the request headers
because Squirrel is responsible for parsing the response.</p>

<p>For the requirements imposed on the responses and the body format of an update
response see <a href="#server-support">Server Support</a>.</p>

<p>Your update request must <em>at least</em> include a version identifier so that the
server can determine whether an update for this specific version is required. It
may also include other identifying criteria such as operating system version or
username, to allow the server to deliver as fine grained an update as you
would like.</p>

<p>How you include the version identifier or other criteria is specific to the
server that you are requesting updates from. A common approach is to use query
parameters, like this:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// On the main process</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;app&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">autoUpdater</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;auto-updater&#39;</span><span class="p">);</span>
<span class="nx">autoUpdater</span><span class="p">.</span><span class="nx">setFeedUrl</span><span class="p">(</span><span class="s1">&#39;http://mycompany.com/myapp/latest?version=&#39;</span> <span class="o">+</span> <span class="nx">app</span><span class="p">.</span><span class="nx">getVersion</span><span class="p">());</span>
</code></pre></div>
<h2 id="server-support">Server Support</h2>

<p>Your server should determine whether an update is required based on the
<a href="#update-requests">Update Request</a> your client issues.</p>

<p>If an update is required your server should respond with a status code of
<a href="http://tools.ietf.org/html/rfc2616#section-10.2.1">200 OK</a> and include the
<a href="#update-json-format">update JSON</a> in the body. Squirrel <strong>will</strong> download and
install this update, even if the version of the update is the same as the
currently running version. To save redundantly downloading the same version
multiple times your server must not inform the client to update.</p>

<p>If no update is required your server must respond with a status code of
<a href="http://tools.ietf.org/html/rfc2616#section-10.2.5">204 No Content</a>. Squirrel
will check for an update again at the interval you specify.</p>

<h2 id="update-json-format">Update JSON Format</h2>

<p>When an update is available, Squirrel expects the following schema in response
to the update request provided:</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://mycompany.com/myapp/releases/myrelease&quot;</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;My Release Name&quot;</span><span class="p">,</span>
  <span class="nt">&quot;notes&quot;</span><span class="p">:</span> <span class="s2">&quot;Theses are some release notes innit&quot;</span><span class="p">,</span>
  <span class="nt">&quot;pub_date&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-09-18T12:29:53+01:00&quot;</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>The only required key is &quot;url&quot;, the others are optional.</p>

<p>Squirrel will request &quot;url&quot; with <code>Accept: application/zip</code> and only supports
installing ZIP updates. If future update formats are supported their MIME type
will be added to the <code>Accept</code> header so that your server can return the
appropriate format.</p>

<p><code>pub_date</code> if present must be formatted according to ISO 8601.</p>

<h2 id="event:-error">Event: error</h2>

<ul>
<li><code>event</code> Event</li>
<li><code>message</code> String</li>
</ul>

<p>Emitted when there is an error updating.</p>

<h2 id="event:-checking-for-update">Event: checking-for-update</h2>

<p>Emitted when checking for update has started.</p>

<h2 id="event:-update-available">Event: update-available</h2>

<p>Emitted when there is an available update, the update would be downloaded
automatically.</p>

<h2 id="event:-update-not-available">Event: update-not-available</h2>

<p>Emitted when there is no available update.</p>

<h2 id="event:-update-downloaded">Event: update-downloaded</h2>

<ul>
<li><code>event</code> Event</li>
<li><code>releaseNotes</code> String</li>
<li><code>releaseName</code> String</li>
<li><code>releaseDate</code> Date</li>
<li><code>updateUrl</code> String</li>
<li><code>quitAndUpdate</code> Function</li>
</ul>

<p>Emitted when update has been downloaded, calling <code>quitAndUpdate()</code> would restart
the application and install the update.</p>

<h2 id="autoupdater.setfeedurl(url)">autoUpdater.setFeedUrl(url)</h2>

<ul>
<li><code>url</code> String</li>
</ul>

<p>Set the <code>url</code> and initialize the auto updater. The <code>url</code> could not be changed
once it is set.</p>

<h2 id="autoupdater.checkforupdates()">autoUpdater.checkForUpdates()</h2>

<p>Ask the server whether there is an update, you have to call <code>setFeedUrl</code> before
using this API.</p>


      </div>
    </div>
    
    <div class='row'>
      <div class='ten columns release offset-by-one docs-footer'>
        <span class="octicon octicon-pencil"></span>
        See something that needs fixing? Propose a change on the <a href='https://github.com/atom/electron/blob/master/docs/api/auto-updater.md'>source</a>.
        <br>
        <span class="octicon octicon-zap"></span>
        Need a different version of the docs? See the <a href='/docs'>available versions</a>.
      </div>
    </div>
    
  </div>
</section>

</div>

      </div>
    </div>

    <footer>
  <div class='container'>
    <div class='row'>
      <div class='one-half column'>
        <ul class='inline-list'>
          <li><a href='https://github.com/atom/electron'>Repository</a></li>
          <li><a href='/docs/v0.36.5'>Documentation</a></li>
          <li><a href='/releases.html'>Releases</a></li>
          <li><a href='http://blog.atom.io'>Blog</a></li>
          <li><a href='https://discuss.atom.io/c/electron'>Discuss</a></li>
        </ul>
      </div>

      <div class='one-half column text-right'>
        <a href='https://github.com' class="no-hover-dec"><span class='octicon octicon-code'></span> with <span class='octicon octicon-heart'></span> by <span class='octicon octicon-logo-github'></span></a>
      </div>
  </div>
</footer>

    <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class='octicon octicon-link'></span>";
    anchor.title = "Permalink";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementsByClassName("docs")[0] || document.getElementsByClassName("news")[0];
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>

  </body>

</html>
